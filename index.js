var C=s=>{throw TypeError(s)};var w=(s,e,t)=>e.has(s)||C("Cannot "+t);var x=(s,e,t)=>(w(s,e,"read from private field"),t?t.call(s):e.get(s)),y=(s,e,t)=>e.has(s)?C("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),k=(s,e,t,r)=>(w(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t),_=(s,e,t)=>(w(s,e,"access private method"),t);import{a as T}from"./assets/vendor-DYiOAYln.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();class F{constructor(e){this.page=e.page,this.perPage=e.perPage,this.totalPages=e.totalPages,this.results=e.results}}class R{constructor(e,t,r){this.filter=e,this.name=t,this.imgURL=r}}class P{constructor(e,t,r){this.filter=e,this.page=t,this.limit=r}}class O extends F{constructor(e){super(e)}getFilters(){return this.results.map(e=>new R(e.filter,e.name,e.imgURL))}}class E{constructor(e,t,r,i,n=1,a=10){this.bodypart=e,this.muscles=t,this.equipment=r,this.keyword=i,this.page=n,this.limit=a}}class b{constructor(e){this.id=e._id,this.bodyPart=e.bodyPart,this.equipment=e.equipment,this.gifUrl=e.gifUrl,this.name=e.name,this.target=e.target,this.description=e.description,this.rating=e.rating,this.burnedCalories=e.burnedCalories,this.time=e.time,this.popularity=e.popularity}}class N extends F{constructor(e){super(e)}getExercises(){return this.results.map(e=>new b(e))}}class D{constructor(e,t,r){this.rate=e,this.email=t,this.review=r}}class A{constructor(e){this.quote=e.quote,this.author=e.author}}const M="https://your-energy.b.goit.study/api";class U{constructor(){this._api=T.create({baseURL:M,headers:{"Content-Type":"application/json"}})}async fetchFilters(e){try{const t=await this._api.get("/filters",{params:e});return new O(t.data)}catch(t){throw console.error("Error fetching filters:",t),t}}async fetchExercisesByFilter(e){try{const t=await this._api.get("/exercises",{params:e});return new N(t.data)}catch(t){throw console.error("Error fetching exercises by filter:",t),t}}async fetchExercisesById(e){try{const t=await this._api.get(`/exercises/${e}`);return new b(t.data)}catch(t){throw console.error("Error fetching exercises by ID:",t),t}}async patchExerciseRating(e,t){try{const r=await this._api.patch(`/exercises/${e}/rating`,t);return new b(r.data)}catch(r){throw console.error("Error updating exercise rating:",r),r}}async fetchQuoteOfTheDay(){try{const e=await this._api.get("/quote");return new A(e.data)}catch(e){throw console.error("Error fetching quote of the day:",e),e}}async postSubscription(e){try{return(await this._api.post("/subscription",{email:e})).data.message}catch(t){throw console.error("Error posting subscription:",t),t}}}const u=new U;(()=>{var n,a,L,d,I,S;const s="quote-of-the-day-container",e="quoteOfTheDay";class t{constructor({text:o,author:m,date:f=null}){y(this,a);y(this,n);this.text=o,this.author=m,this.date=f||new Date}set date(o){k(this,n,_(this,a,L).call(this,o))}get date(){return x(this,n)}isFresh(){return x(this,n)===_(this,a,L).call(this,new Date)}toJSON(){return{text:this.text,author:this.author,date:x(this,n)}}}n=new WeakMap,a=new WeakSet,L=function(o){return o.toISOString().split("T")[0]};class r{static async getQuote(){const o=_(this,d,I).call(this);if(o!=null&&o.isFresh())return o;const m=await u.fetchQuoteOfTheDay(),f=new t({text:m.quote,author:m.author});return _(this,d,S).call(this,f),f}}d=new WeakSet,I=function(){const o=JSON.parse(localStorage.getItem(e));return o&&(o.date=new Date(o==null?void 0:o.date)),o?new t(o):null},S=function(o){localStorage.setItem(e,JSON.stringify(o))},y(r,d);async function i(){const l=document.querySelector(`[data-role="${s}"]`);if(l===null)throw new Error(`Failed to render quote: element with data-role "${s}" not found.`);try{const o=await r.getQuote();l.innerHTML=`
        <p class="quote-text">${o.text}</p>
        <p class="quote-author">${o.author}</p>
      `}catch(o){console.error("Error fetching quote:",o)}}document.addEventListener("DOMContentLoaded",i)})();function $(){const s=document.createElement("button");s.id="scrollUpBtn",s.title="Up",s.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none">
      <path d="M12 4L12 20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M5 11L12 4L19 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  `,document.body.appendChild(s),window.addEventListener("scroll",()=>{window.scrollY>300?s.classList.add("show"):s.classList.remove("show")}),s.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}class H{constructor(){this.backdrop=document.createElement("div"),this.backdrop.className="loader-backdrop",this.backdrop.innerHTML='<div class="loader"></div>'}show(){document.body.contains(this.backdrop)||document.body.appendChild(this.backdrop)}hide(){document.body.contains(this.backdrop)&&document.body.removeChild(this.backdrop)}}const B="/goit-adv-js-final-project-team-5/assets/sprite-D9KaOlX4.svg";function v(s){return s.charAt(0).toUpperCase()+s.slice(1)}class Q{constructor(){this._element=document.createElement("li"),this._element.classList.add("exercises-filters__item"),this._image=document.createElement("img"),this._image.classList.add("exercises-filters__image"),this._image.setAttribute("loading","lazy"),this._overlay=document.createElement("div"),this._overlay.classList.add("exercises-filters__overlay"),this._overlayTitle=document.createElement("h5"),this._overlayText=document.createElement("p"),this._overlayText.classList.add("exercises-filters__overlay-text")}setImage(e){this._image.src=e}setTitle(e){this._overlayTitle.textContent=v(e)}setText(e){this._overlayText.textContent=v(e)}setFilterName(e,t){this._element.dataset.name=e,this._element.dataset.filter=t}setImageAlt(e){this._image.alt=e}build(){return this._overlay.append(this._overlayTitle,this._overlayText),this._element.append(this._image,this._overlay),this._element}}class J{constructor(){this._element=document.createElement("li"),this._element.classList.add("exercises-list__item"),this._header=document.createElement("div"),this._header.classList.add("exercise-header"),this._nameBlock=document.createElement("h3"),this._nameBlock.classList.add("exercise-name"),this._infoBlock=document.createElement("div"),this._infoBlock.classList.add("exercise-info")}addHeader(e){const t=document.createElement("div");t.classList.add("exercise-header__left");const r=document.createElement("p");r.classList.add("exercise-workout"),r.textContent="WORKOUT",t.append(r);const i=document.createElement("p");i.classList.add("exercise-rating"),i.textContent=`${e}`;const n=document.createElement("span");n.append(this._createSvg("star","exercise-rating__icon",24,24)),i.append(n),t.append(i);const a=document.createElement("button");a.classList.add("exercise-header__start-button"),a.textContent="Start",a.append(this._createSvg("exercise-start","exercise-arrow",13,13)),this._header.append(t,a)}addName(e){this._nameBlock.append(this._createSvg("runner","exercise-name-icon",13,13)),this._nameBlock.append(e)}addInfo(e,t,r){this._infoBlock.append(this._createInfoTextElement("Burned calories: ",e)),this._infoBlock.append(this._createInfoTextElement("Body part: ",t)),this._infoBlock.append(this._createInfoTextElement("Target: ",r))}build(){return this._element.append(this._header,this._nameBlock,this._infoBlock),this._element}setId(e){this._element.dataset.id=e}_createInfoTextElement(e,t,r="truncate-text"){const i=document.createElement("p");i.classList.add(r);const n=document.createElement("strong");return n.classList.add("exercise-info__title"),n.textContent=e,i.append(n),i.append(document.createTextNode(t)),i}_createSvg(e,t){const r=document.createElement("svg");r.classList.add(t);const i=document.createElement("use");return i.setAttribute("href",`${B}#${e}`),r.appendChild(i),r}}class K{constructor(){if(this._exercisesFilterParent=document.getElementById("exercises-filters"),this._exercisesParent=document.getElementById("exercises-list"),!this._exercisesFilterParent)throw new Error("Exercises filter parent element not found");this._paginationElement=document.querySelector(".exercises-pagination>ul"),this._breadcrumbs=document.querySelector(".breadcrumbs"),this._searchContainer=document.getElementById("search-container"),this._searchInput=this._searchContainer.querySelector(".search-input"),this._page=1,this._limit=12,this._pages=1,this._elements=[],this._isCategory=!1}async init(){this._setPageLimit(),await this._fetchFilters(),this._renderFilters(),this._addEventListeners()}_setPageLimit(){this._page=1,window.innerWidth<=768?this._limit=9:this._limit=12}async _fetchFilters(){const e=this._exercisesFilterParent.querySelector(".exercises-filters__selected");if(!e)throw new Error("Filter button not found");const t=e.dataset.name,r=new P(t,this._page,this._limit);try{const i=await u.fetchFilters(r),n=i.getFilters();this._pages=i.totalPages,n.length>0&&(this._elements=n.map(a=>{const c=new Q;return c.setImage(a.imgURL),c.setTitle(a.name),c.setText(a.filter),c.setFilterName(a.name,a.filter),c.setImageAlt(a.name),c.build()})),this._pages=i.totalPages}catch(i){console.error("Error fetching filters:",i)}}_renderFilters(){this._exercisesParent.replaceChildren(...this._elements),this._renderPagination(),this._addBreadcrumbs(),this._isCategory=!0,localStorage.removeItem("exerciseFilter"),this._searchContainer.classList.add("hidden")}async _onCardClick(e){e.preventDefault();const t=e.target.closest(".exercises-filters__item");if(t){this._searchContainer.classList.remove("hidden"),this._addBreadcrumbs(t.dataset.name);const r=t.dataset.name,i=t.dataset.filter,n=this._buildRequest(r,i);localStorage.setItem("exerciseFilter",JSON.stringify(n)),await this._loadAndRenderExercises(n)}}async _loadAndRenderExercises(e){const t=await u.fetchExercisesByFilter(e);this._renderExercises(t),this._renderPagination(),this._isCategory=!1}_addBreadcrumbs(e=null){if((this._breadcrumbs.children.length>1||!e&&this._breadcrumbs.children.length>1)&&this._breadcrumbs.children[1].remove(),!e)return;const t=document.createElement("li");t.classList.add("breadcrumbs__item");const r=document.createElement("span");r.textContent="/",t.append(r),t.append(v(e)),this._breadcrumbs.append(t)}_renderPagination(){const e=[],t=document.createElement("li");t.classList.add("exercises-pagination__dots"),t.textContent="...";const r=(c,d,g,p)=>{const l=document.createElement("li");l.classList.add("exercises-pagination__item"),l.classList.add(c),l.classList.add("exercises-pagination__arrow"),l.dataset.page=d,this._page===d&&l.classList.add("disabled");const o=document.createElement("svg");o.classList.add(g);const m=document.createElement("use");return m.setAttribute("href",`${B}#${p}`),o.appendChild(m),l.append(o),l},i=()=>{const c=r("exercises-pagination__beginning",1,"exercises-pagination__beginning__arrow","pagination-left-double-arrow"),d=r("exercises-pagination__previous",this._page===1?1:this._page-1,"exercises-pagination__arrow","pagination-left-single-arrow");e.push(c),e.push(d),this._page>=3&&e.push(t)},n=()=>{const c=r("exercises-pagination__last",this._pages,"exercises-pagination__arrow","pagination-right-double-arrow"),d=r("exercises-pagination__next",this._page===this._pages?this._pages:this._page+1,"exercises-pagination__arrow","pagination-right-single-arrow");this._page<=this._pages-2&&e.push(t),e.push(d),e.push(c)},a=(c,d=1)=>{const g=[];for(let p=d;p<=c;p++){const l=document.createElement("li");l.classList.add("exercises-pagination__item"),l.classList.add("exercises-pagination__number"),p===this._page&&l.classList.add("exercises-pagination__current"),l.textContent=p,l.dataset.page=p,g.push(l)}return g};if(this._pages<=3&&e.push(...a(this._pages)),this._pages>3){i();const c=this._page===1?1:this._page===this._pages?this._page-2:this._page-1,d=c+2;e.push(...a(d,c)),n()}this._paginationElement.innerHTML="";for(const c of e)this._paginationElement.innerHTML+=c.outerHTML}async _onPageClick(e){e.preventDefault();const t=e.target.closest(".exercises-pagination__item");if(!t||t.classList.contains("disabled"))return;const r=parseInt(t.dataset.page);if(isNaN(r)||(this._page=r),this._isCategory){await this._fetchFilters(),this._renderFilters();return}const i=JSON.parse(localStorage.getItem("exerciseFilter"));i.page=this._page,localStorage.setItem("exerciseFilter",JSON.stringify(i)),await this._loadAndRenderExercises(i)}_renderExercises(e){if(this._exercisesParent.innerHTML="",!e||!e.results||e.results.length===0){this._exercisesParent.innerHTML="<p>No exercises found.</p>";return}this._pages=e.totalPages;const t=e.getExercises();this._elements=t.map(r=>{const i=new J;return i.setId(r.id),i.addHeader(r.rating),i.addName(r.name),i.addInfo(r.burnedCalories,r.bodyPart,r.target),i.build()});for(const r of this._elements)this._exercisesParent.innerHTML+=r.outerHTML}async _onFilterClick(e){e.preventDefault(),this._setPageLimit(),this._exercisesFilterParent.querySelectorAll(".exercises-filters__selected").forEach(r=>{r.classList.remove("exercises-filters__selected")}),e.target.classList.add("exercises-filters__selected"),await this._fetchFilters(),this._renderFilters()}_addEventListeners(){this._exercisesFilterParent.removeEventListener("click",this._onFilterClick.bind(this)),this._exercisesFilterParent.addEventListener("click",this._onFilterClick.bind(this)),this._exercisesParent.removeEventListener("click",this._onCardClick.bind(this)),this._exercisesParent.addEventListener("click",this._onCardClick.bind(this)),this._paginationElement.addEventListener("click",this._onPageClick.bind(this)),this._searchContainer.querySelector(".search-button").addEventListener("click",this._onSearchClick.bind(this)),this._searchInput.addEventListener("keyup",this._onSearchKeyUp.bind(this))}async _onSearchClick(e){e.preventDefault();const t=this._searchInput.value.trim();if(t){const r=JSON.parse(localStorage.getItem("exerciseFilter"));r.keyword=t,localStorage.setItem("exerciseFilter",JSON.stringify(r)),this._searchInput.value="",await this._loadAndRenderExercises(r)}}async _onSearchKeyUp(e){e.preventDefault();const t=this._searchInput.value.trim();e.key==="Enter"&&t&&await this._onSearchClick(e)}_buildRequest(e,t){if(t.toLowerCase()==="muscles")return new E(null,e,null,null,this._page,this._limit);if(t.toLowerCase()==="equipment")return new E(null,null,e,null,this._page,this._limit);if(t.toLowerCase()==="body parts")return new E(e,null,null,null,this._page,this._limit)}}const j=new K,h=new H,V=new P("Body parts",1,5);h.show();u.fetchFilters(V).then(s=>{console.log("Response:",s),console.log("Filters:",s.getFilters())}).catch(s=>{console.error("Error:",s)}).finally(()=>{h.hide()});const Y=new E("back","lats","barbell","pull",1,5);h.show();u.fetchExercisesByFilter(Y).then(s=>{console.log("Response:",s),console.log("Exercises:",s.getExercises())}).catch(s=>{console.error("Error:",s)}).finally(()=>{h.hide()});const q="64f389465ae26083f39b1ab2";h.show();u.fetchExercisesById(q).then(s=>{console.log("Response:",s)}).catch(s=>{console.error("Error:",s)}).finally(()=>{h.hide()});const z=new D(3,`test${Date.now()}@gmail.com`,"Great exercise! Very effective.");h.show();u.patchExerciseRating(q,z).then(s=>{console.log("Response:",s)}).catch(s=>{console.error("Error:",s)}).finally(()=>{h.hide()});h.show();u.fetchQuoteOfTheDay().then(s=>{console.log("Quote of the Day:",s),console.log("Quote:",s.quote),console.log("Author:",s.author)}).catch(s=>{console.error("Error fetching quote:",s)}).finally(()=>{h.hide()});const W=`sub_test${Date.now()}@gmail.com`;h.show();u.postSubscription(W).then(s=>{console.log("Subscription Response:",s)}).catch(s=>{console.error("Error:",s)}).finally(()=>{h.hide()});document.addEventListener("DOMContentLoaded",()=>{$()});j.init();const G=s=>{s.response?alert({400:"Bad request: invalid request body.",404:"Endpoint not found.",409:"You are already subscribed.",500:"Server error: please try again later."}[s.response.status]||"Unknown server error occurred."):alert("Unexpected error. Please check your connection and try again."),console.error("API Error:",s)};document.addEventListener("DOMContentLoaded",()=>{var i;const s=document.getElementById("subscriptionForm"),e=(i=s==null?void 0:s.elements)==null?void 0:i.email,t=n=>alert(n),r=n=>{t(n),e.value=""};s==null||s.addEventListener("submit",async n=>{if(n.preventDefault(),!e.checkValidity()){t("Please enter a valid email address.");return}try{const a=await u.postSubscription(e.value.trim());r(a)}catch(a){G(a)}})});
//# sourceMappingURL=index.js.map
