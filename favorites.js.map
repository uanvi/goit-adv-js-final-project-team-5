{"version":3,"file":"favorites.js","sources":["../src/js/favorites.js"],"sourcesContent":["// Initialize the ExerciseFavoriteRenderer to manage favorites\nimport { ExerciseElement } from './exercises.js';\nimport { getFavorites, removeExerciseFromFavorite } from './utils/favoritesStorage.js';\nimport yourEnergyAPI from './your-energy-api.js';\nimport { initModalListeners } from './modal.js';\n\nclass ExerciseFavoriteRenderer {\n  constructor() {\n    this._favoritesParent = document.getElementById('favorites-list');\n    if (!this._favoritesParent) {\n      throw new Error('Favorites list parent element not found');\n    }\n    this.initFavorites();\n  }\n\n  initFavorites() {\n    this._favorites = getFavorites();\n    if (this._favorites.length === 0) {\n      this._favoritesParent.innerHTML = '<li class=\"no-favorites\">' +\n        '<p>It appears that you haven\\'t added any exercises to your favorites yet. To get started, ' +\n        'you can add exercises that you like to your favorites for easier access in the future.</p>' +\n        '</li>';\n    }\n  }\n\n  // Function to fetch exercises by ID and render them\n  async loadAndRenderFavorites() {\n    if (this._favorites.length === 0) {\n      return;\n    }\n\n    this._favoritesParent.innerHTML = ''; // Clear any existing content\n    const exercises = await this.fetchExercisesByIds(this._favorites);\n    this.renderFavorites(exercises);\n  }\n\n  // Fetch exercises by their IDs\n  async fetchExercisesByIds(ids) {\n    try {\n      const exercisePromises = ids.map(id => yourEnergyAPI.fetchExercisesById(id));\n      return await Promise.all(exercisePromises);\n    } catch (error) {\n      console.error('Error fetching favorite exercises:', error);\n    }\n  }\n\n  // Render the exercises to the favorites list\n  renderFavorites(exercises) {\n\n    const elements = exercises.map(exercise => {\n      const exerciseElement = new ExerciseElement();\n      exerciseElement.setId(exercise.id);\n      exerciseElement.addFavoriteHeader(exercise.id);\n      exerciseElement.addName(exercise.name);\n      exerciseElement.addInfo(exercise.burnedCalories, exercise.bodyPart, exercise.target);\n      return exerciseElement.build();\n    });\n\n    for (const element of elements) {\n      this._favoritesParent.innerHTML += element.outerHTML;\n    }\n    initModalListeners();\n    this.initRemoveButtons();\n  }\n\n  initRemoveButtons() {\n    document\n      .querySelectorAll('.exercise-header__remove-button')\n      .forEach(element => element.addEventListener('click', event => this.handleRemoveClick(event)));\n  }\n\n  async handleRemoveClick(event) {\n    event.preventDefault();\n    const exerciseElement = event.target.closest('.exercises-list__item');\n\n    removeExerciseFromFavorite(exerciseElement.dataset.id);\n    this.initFavorites();\n    exerciseElement.remove();\n  }\n}\n\n\n// Load and render the favorites when the page is ready\ndocument.addEventListener('DOMContentLoaded', () => {\n  new ExerciseFavoriteRenderer().loadAndRenderFavorites();\n});\n"],"names":["ExerciseFavoriteRenderer","getFavorites","exercises","ids","exercisePromises","id","yourEnergyAPI","error","elements","exercise","exerciseElement","ExerciseElement","element","initModalListeners","event","removeExerciseFromFavorite"],"mappings":"2IAMA,MAAMA,CAAyB,CAC7B,aAAc,CAEZ,GADA,KAAK,iBAAmB,SAAS,eAAe,gBAAgB,EAC5D,CAAC,KAAK,iBACR,MAAM,IAAI,MAAM,yCAAyC,EAE3D,KAAK,cAAe,CACxB,CAEE,eAAgB,CACd,KAAK,WAAaC,EAAc,EAC5B,KAAK,WAAW,SAAW,IAC7B,KAAK,iBAAiB,UAAY,qNAKxC,CAGE,MAAM,wBAAyB,CAC7B,GAAI,KAAK,WAAW,SAAW,EAC7B,OAGF,KAAK,iBAAiB,UAAY,GAClC,MAAMC,EAAY,MAAM,KAAK,oBAAoB,KAAK,UAAU,EAChE,KAAK,gBAAgBA,CAAS,CAClC,CAGE,MAAM,oBAAoBC,EAAK,CAC7B,GAAI,CACF,MAAMC,EAAmBD,EAAI,IAAIE,GAAMC,EAAc,mBAAmBD,CAAE,CAAC,EAC3E,OAAO,MAAM,QAAQ,IAAID,CAAgB,CAC1C,OAAQG,EAAO,CACd,QAAQ,MAAM,qCAAsCA,CAAK,CAC/D,CACA,CAGE,gBAAgBL,EAAW,CAEzB,MAAMM,EAAWN,EAAU,IAAIO,GAAY,CACzC,MAAMC,EAAkB,IAAIC,EAC5B,OAAAD,EAAgB,MAAMD,EAAS,EAAE,EACjCC,EAAgB,kBAAkBD,EAAS,EAAE,EAC7CC,EAAgB,QAAQD,EAAS,IAAI,EACrCC,EAAgB,QAAQD,EAAS,eAAgBA,EAAS,SAAUA,EAAS,MAAM,EAC5EC,EAAgB,MAAO,CACpC,CAAK,EAED,UAAWE,KAAWJ,EACpB,KAAK,iBAAiB,WAAaI,EAAQ,UAE7CC,EAAoB,EACpB,KAAK,kBAAmB,CAC5B,CAEE,mBAAoB,CAClB,SACG,iBAAiB,iCAAiC,EAClD,QAAQD,GAAWA,EAAQ,iBAAiB,QAASE,GAAS,KAAK,kBAAkBA,CAAK,CAAC,CAAC,CACnG,CAEE,MAAM,kBAAkBA,EAAO,CAC7BA,EAAM,eAAgB,EACtB,MAAMJ,EAAkBI,EAAM,OAAO,QAAQ,uBAAuB,EAEpEC,EAA2BL,EAAgB,QAAQ,EAAE,EACrD,KAAK,cAAe,EACpBA,EAAgB,OAAQ,CAC5B,CACA,CAIA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,IAAIV,EAA0B,EAAC,uBAAwB,CACzD,CAAC"}