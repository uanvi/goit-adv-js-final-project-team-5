{"version":3,"file":"index.js","sources":["../src/js/quote.js"],"sourcesContent":["import yourEnergyAPI from './your-energy-api.js';\n\n(() => {\n  const ROLE = 'quote-of-the-day-container';\n  const storageKey = 'quoteOfTheDay';\n\n  class Quote {\n    #date;\n    /**\n     * @param {Date} date\n     */\n    set date(date) {\n      this.#date = this.#formatDate(date);\n    }\n\n    get date() {\n      return this.#date;\n    }\n\n    /**\n     * @param {String} text\n     * @param {String} author\n     * @param {Date} date\n     */\n    constructor({ text, author, date = null }) {\n      this.text = text;\n      this.author = author;\n      this.date = date || new Date();\n    }\n\n    isFresh() {\n      return this.#date === this.#formatDate(new Date());\n    }\n\n    #formatDate(date) {\n      return date.toISOString().split('T')[0];\n    }\n\n    toJSON() {\n      return {\n        text: this.text,\n        author: this.author,\n        date: this.#date,\n      };\n    }\n  }\n\n  class QuoteProvider {\n    static #load() {\n      const quoteData = JSON.parse(localStorage.getItem(storageKey));\n      if(quoteData) {\n        quoteData.date = new Date(quoteData?.date);\n      }\n      return quoteData ? new Quote(quoteData) : null;\n    }\n\n    static #save(quote) {\n      localStorage.setItem(storageKey, JSON.stringify(quote));\n    }\n\n    static async getQuote() {\n      const storedQuote = this.#load();\n      if (storedQuote?.isFresh()) {\n        return storedQuote;\n      }\n\n      const quote = await yourEnergyAPI.fetchQuoteOfTheDay();\n      const newQuote = new Quote({\n        text: quote.quote,\n        author: quote.author,\n      });\n      this.#save(newQuote);\n\n      return newQuote;\n    }\n  }\n\n  async function renderQuote() {\n    const quoteContainer = document.querySelector(`[data-role=\"${ROLE}\"]`);\n    if (quoteContainer === null) {\n      throw new Error(`Failed to render quote: element with data-role \"${ROLE}\" not found.`);\n    }\n    try {\n      const quote = await QuoteProvider.getQuote();\n      quoteContainer.innerHTML = `\n        <p class=\"quote-text\">${quote.text}</p>\n        <p class=\"quote-author\">${quote.author}</p>\n      `;\n    } catch (e) {\n      console.error('Error fetching quote:', e);\n    }\n  }\n\n  document.addEventListener('DOMContentLoaded', renderQuote);\n})();\n"],"names":["ROLE","storageKey","Quote","text","author","date","__privateAdd","_Quote_instances","_date","__privateSet","__privateMethod","formatDate_fn","__privateGet","QuoteProvider","storedQuote","_QuoteProvider_static","load_fn","quote","yourEnergyAPI","newQuote","save_fn","quoteData","renderQuote","quoteContainer","e"],"mappings":"2cAEC,IAAM,iBACL,MAAMA,EAAO,6BACPC,EAAa,gBAEnB,MAAMC,CAAM,CAkBV,YAAY,CAAE,KAAAC,EAAM,OAAAC,EAAQ,KAAAC,EAAO,IAAI,EAAI,CAlB7CC,EAAA,KAAAC,GACED,EAAA,KAAAE,GAkBE,KAAK,KAAOL,EACZ,KAAK,OAASC,EACd,KAAK,KAAOC,GAAQ,IAAI,IACzB,CAjBD,IAAI,KAAKA,EAAM,CACbI,EAAA,KAAKD,EAAQE,EAAA,KAAKH,EAAAI,GAAL,UAAiBN,GAC/B,CAED,IAAI,MAAO,CACT,OAAOO,EAAA,KAAKJ,EACb,CAaD,SAAU,CACR,OAAOI,EAAA,KAAKJ,KAAUE,EAAA,KAAKH,EAAAI,GAAL,UAAiB,IAAI,KAC5C,CAMD,QAAS,CACP,MAAO,CACL,KAAM,KAAK,KACX,OAAQ,KAAK,OACb,KAAMC,EAAA,KAAKJ,EACnB,CACK,CACF,CAtCCA,EAAA,YADFD,EAAA,YA4BEI,EAAW,SAACN,EAAM,CAChB,OAAOA,EAAK,YAAa,EAAC,MAAM,GAAG,EAAE,CAAC,CACvC,EAWH,MAAMQ,CAAc,CAalB,aAAa,UAAW,CACtB,MAAMC,EAAcJ,EAAA,KAAKK,EAAAC,GAAL,WACpB,GAAIF,GAAA,MAAAA,EAAa,UACf,OAAOA,EAGT,MAAMG,EAAQ,MAAMC,EAAc,qBAC5BC,EAAW,IAAIjB,EAAM,CACzB,KAAMe,EAAM,MACZ,OAAQA,EAAM,MACtB,CAAO,EACD,OAAAP,EAAA,KAAKK,EAAAK,GAAL,UAAWD,GAEJA,CACR,CACF,CA5BDJ,EAAA,YACSC,EAAK,UAAG,CACb,MAAMK,EAAY,KAAK,MAAM,aAAa,QAAQpB,CAAU,CAAC,EAC7D,OAAGoB,IACDA,EAAU,KAAO,IAAI,KAAKA,GAAA,YAAAA,EAAW,IAAI,GAEpCA,EAAY,IAAInB,EAAMmB,CAAS,EAAI,IAC3C,EAEMD,EAAK,SAACH,EAAO,CAClB,aAAa,QAAQhB,EAAY,KAAK,UAAUgB,CAAK,CAAC,CACvD,EAXHX,EAAMO,EAANE,GA8BA,eAAeO,GAAc,CAC3B,MAAMC,EAAiB,SAAS,cAAc,eAAevB,CAAI,IAAI,EACrE,GAAIuB,IAAmB,KACrB,MAAM,IAAI,MAAM,mDAAmDvB,CAAI,cAAc,EAEvF,GAAI,CACF,MAAMiB,EAAQ,MAAMJ,EAAc,WAClCU,EAAe,UAAY;AAAA,gCACDN,EAAM,IAAI;AAAA,kCACRA,EAAM,MAAM;AAAA,OAEzC,OAAQO,EAAG,CACV,QAAQ,MAAM,wBAAyBA,CAAC,CACzC,CACF,CAED,SAAS,iBAAiB,mBAAoBF,CAAW,CAC3D,GAAI"}